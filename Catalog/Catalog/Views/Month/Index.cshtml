@model IEnumerable<Catalog.Models.MonthViewModel>
@{
    ViewBag.Title = "Month Charts";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="row" style="margin-top: 15px; margin-bottom: 15px">
    <div class="col-md-2">
        @foreach (var month in @Model)
        {
            <div class="row" style="margin-top: 5px">
                <div class="col-md-6">
                    <label for="@month.MonthName" class="control-label">@month.MonthName</label>
                </div>

                <div class="col-md-6">
                    <input type="number" name="@month.MonthName" class="form-control" value="@month.Value"/>
                </div>
            </div>
        }
    </div>
    <div class="col-md-10">
        <div>
            <canvas id="canvas" style="height: 450px; width: 100%"></canvas>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-2">
        <input type="button" class="btn btn-info" name="updateChart" value="Update Chart" onclick="updateChart()" style="width: 100%" />
    </div>
</div>

@section scripts
{
    <script type="text/javascript">
        //var randomScalingFactor = function () { return Math.round(Math.random() * 100) };

        var lineChartData = {
            labels: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "November", "October", "December"],
            datasets: [
                {
                    label: "My First dataset",
                    fillColor: "rgba(151,187,205,0.2)",
                    strokeColor: "rgba(151,187,205,1)",
                    pointColor: "rgba(151,187,205,1)",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(151,187,205,1)",
                    //data: [randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor(), randomScalingFactor()]
                    data:
                    [
                        @foreach (var month in Model)
                        {
                            @(month.Value + ",");
                        }
                    ]
                }
            ]
        }

        var ctx = document.getElementById("canvas").getContext("2d");
        window.myLine = new Chart(ctx).Line(lineChartData, {
            responsive: true
        });

        function updateChart() {
            $().post("Month/UpdateChart", @Model, updateCharSuccess(),"json");
        }

        function updateCharSuccess() {
            alert("teste success");
        }
    </script>
}